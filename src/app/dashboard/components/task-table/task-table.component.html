<div class="container" *ngIf="parentTaskData">
    <table class="table table-striped table-bordered">
        <thead>
            <!-- Header Row -->
            <tr>
                <th scope="col">Child</th>
                <th scope="col">Task Name</th>
                <th scope="col">Description</th>
                <th scope="col">Owner</th>
                <th scope="col">Assigned To</th>
                <th scope="col">ETA</th>
                <th scope="col">Status</th>
                <th scope="col">Action</th>
            </tr>
        </thead>
        <tbody>
            <!-- Main Rows with Expandable Child Panels -->
            <ng-container *ngFor="let task of parentTaskData; let i = index">
                <tr>
                    <th scope="row" (click)="toggleChildTable(i, task)">
                        <span *ngIf="!showChildTable.get(task.taskId)">+</span>
                        <span *ngIf="showChildTable.get(task.taskId)">-</span>
                    </th>
                    <td>{{ task.taskName }}</td>
                    <td>{{ task.taskDescription }}</td>
                    <td>
                        <select id="createEmployeeId" name="createEmployeeId" [(ngModel)]="task.taskCreatedBy" required
                            class="form-control">
                            <option value="undefined" selected>Select Employee</option>
                            <!-- Loop through the 'employees' array and display each employee as an option -->
                            <option *ngFor="let employee of employees" [value]="employee.employeeId">{{
                                employee.firstName }}</option>
                        </select>
                    </td>
                    <td>
                        <select id="assignedToEmployeeId" name="assignedToEmployeeId" [(ngModel)]="task.taskAssignedTo" required
                            class="form-control">
                            <option value="undefined" selected>Select Employee</option>
                            <!-- Loop through the 'employees' array and display each employee as an option -->
                            <option *ngFor="let employee of employees" [value]="employee.employeeId">{{
                                employee.firstName }}</option>
                        </select>
                    </td>
                    <td>{{ task.taskEndDate | date:'MM-dd-yyyy'}}</td>
                    <td>{{ task.taskStatus }}</td>
                    <td>
                        <div class="row">
                            <button class="col btn btn-success btn-sm">ADD</button>
                            <button class="col btn btn-info btn-sm">SAVE</button>
                            <button class="col btn btn-danger btn-sm">DELETE</button>
                        </div>
                    </td>
                </tr>
                <!-- Expandable Child Panel -->
                <tr *ngIf="showChildTable.get(task.taskId)">
                    <td colspan="8">
                        <!-- Custom template for child table -->
                        <app-task-table [parentTaskData]="task.childTask" [employees]="employees"></app-task-table>
                    </td>
                </tr>
            </ng-container>
        </tbody>
    </table>
</div>